<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
   integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
   <link rel="stylesheet" href="/styles.css">
  <title>Editar Cultivo</title>
</head>
<body class="container mt-5">
  
<h1 class="mb-4">Editar Cultivo</h1>

<form action="/cultivos/editar/<%= cultivo._id %>" method="post">
  
  <div class="mb-3">
  <label for="nombre">Nombre</label>
  <input type="text" class="form-control" name="nombre" value="<%= cultivo.nombre %>" />
  </div>

  <div class="mb-3">
  <label for="fechaSiembra">Fecha de siembra</label>
  <input type="date" class="form-control" name="fechaSiembra" value="<%= cultivo.fechaSiembra ? cultivo.fechaSiembra.toISOString().substr(0,10) : '' %>" />
  </div>

  <div class="mb-3">
  <label for="fechaCosecha">Fecha de cosecha</label>
  <input type="date" class="form-control" name="fechaCosecha" value="<%= cultivo.fechaCosecha ? cultivo.fechaCosecha.toISOString().substr(0,10) : '' %>" />
  </div>

  <div class="mb-3">
  <label for="estado">Estado</label>
  <select name="estado" class="form-select">
    <option value="Activo" <%= cultivo.estado === 'Activa' ? 'selected' : '' %>>Activo</option>
    <option value="En cosecha" <%= cultivo.estado === 'En cosecha' ? 'selected' : '' %>>En cosecha</option>
    <option value="Completado" <%= cultivo.estado === 'Completado' ? 'selected' : '' %>>Completado</option>
    <option value="Otro" <%= cultivo.estado === 'Otro' ? 'selected' : '' %>>Otro</option>
  </select>
  </div>

  <div class="mb-3">
    <label for="hacienda" class="form-label">Hacienda</label>
    <select name="hacienda" class="form-select">
        <% haciendas.forEach(function(hacienda){ %>
            <option value="<%= hacienda._id %>" <%= cultivo.hacienda.toString() === hacienda._id.toString() ? 'selected' : '' %>><%= hacienda.nombre %></option>
        <% }); %>
    </select>
</div>

<div class="mb-3">
    <label for="parcela" class="form-label">Parcela</label>
    <select name="parcela" class="form-select">
        <% parcelas.forEach(function(parcela){ %>
            <option value="<%= parcela._id %>" <%= cultivo.parcela.toString() === parcela._id.toString() ? 'selected' : '' %>><%= parcela.nombre %></option>
        <% }); %>
    </select>
</div>
 
  <button type="submit" class="btn btn-success">Guardar</button>  
  <a href="/cultivos" class="btn btn-secondary">Cancelar</a>
</form>

</body>
</html>
